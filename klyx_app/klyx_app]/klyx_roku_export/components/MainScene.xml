<?xml version="1.0" encoding="utf-8" ?>
<component name="MainScene" extends="Group">
    <script type="text/brightscript" uri="pkg:/components/MainScene.brs" />

    <children>
        <!-- Background Principal -->
        <Rectangle 
            width="1920" 
            height="1080" 
            color="0x141414FF" />
            
        <!-- Background Gradient/Image -->
        <Poster
            id="heroBackground"
            width="1920"
            height="1080"
            loadDisplayMode="scaleToFill"
            opacity="0.4" />
            
        <!-- Gradient Overlay for readability -->
        <Rectangle 
            width="1920" 
            height="1080" 
            color="0x000000CC" />

        <!-- Layout Principal: Menu Lateral + Conteúdo -->
        <LayoutGroup layoutDirection="horiz" translation="[0, 0]">
            
            <!-- Menu Lateral (Estilo Netflix: ícones + texto quando expandido, mas por enquanto texto simples melhorado) -->
            <Rectangle 
                width="350" 
                height="1080" 
                color="0x000000FF" 
                opacity="0.9">
                
                <LayoutGroup 
                    id="sideMenu" 
                    layoutDirection="vert" 
                    width="300" 
                    translation="[25, 50]" 
                    itemSpacings="[40]">
                    
                    <!-- Logo -->
                    <Poster 
                        uri="pkg:/images/logo.png" 
                        width="180" 
                        height="80" 
                        loadDisplayMode="scaleToFit" />
    
                    <!-- Lista de Opções -->
                    <LabelList 
                        id="menuList" 
                        width="300" 
                        itemSize="[300, 60]" 
                        translation="[0, 50]" 
                        color="0xAAAAAAFF"
                        focusedColor="0xFFFFFFFF"
                        font="font:MediumBoldSystemFont" />
                </LayoutGroup>
            </Rectangle>

            <!-- Área de Conteúdo (Direita) -->
            <Group id="contentArea" translation="[0, 0]">
                
                <!-- Hero Banner (Destaque) -->
                <Group id="heroSection" translation="[50, 50]" visible="true">
                    <Poster 
                        id="heroPoster" 
                        width="1500" 
                        height="450" 
                        loadDisplayMode="scaleToFill" />
                        
                    <Label 
                        id="heroTitle" 
                        text="" 
                        width="1000" 
                        translation="[50, 300]" 
                        font="font:LargeBoldSystemFont" 
                        color="0xFFFFFFFF" />
                        
                    <Label 
                        id="heroDescription" 
                        text="" 
                        width="800" 
                        translation="[50, 360]" 
                        font="font:SmallSystemFont" 
                        color="0xDDDDDDFF" 
                        maxLines="3" />
                </Group>

                <!-- Título da Seção (Abaixo do Hero) -->
                <Label 
                    id="sectionTitle" 
                    text="Populares" 
                    font="font:MediumBoldSystemFont" 
                    translation="[50, 520]" 
                    color="0xFFFFFFFF" />

                <!-- Lista de Trilhos (RowList) -->
                <RowList 
                    id="mainRowList" 
                    translation="[0, 580]" 
                    itemComponentName="StandardGridItem" 
                    numRows="3" 
                    rowItemSize="[[196, 294]]" 
                    rowItemSpacing="[[20, 0]]" 
                    itemSize="[1600, 350]" 
                    rowLabelOffset="[[50, 10]]" 
                    showRowLabel="true" 
                    rowLabelColor="0xCCCCCCFF"
                    visible="true" />
            </Group>
        </LayoutGroup>

        <!-- Loading Indicator -->
        <Label 
            id="loadingLabel" 
            text="Carregando KLYX..." 
            width="1920" 
            height="1080" 
            horizAlign="center" 
            vertAlign="center" 
            font="font:LargeBoldSystemFont"
            visible="false" />

        <!-- Video Player (Overlay) -->
        <Video 
            id="videoPlayer" 
            visible="false" 
            width="1920" 
            height="1080" />

        <!-- Custom Player UI Overlay -->
        <Group id="playerOverlay" visible="false">
            <!-- Top Gradient (Shadow) -->
            <Rectangle 
                width="1920" 
                height="200" 
                color="0x00000099" />
                
            <!-- Title -->
            <Label 
                id="playerTitle" 
                text="" 
                translation="[50, 50]" 
                font="font:MediumBoldSystemFont" 
                color="0xFFFFFFFF" />

            <!-- Center Status Indicator (Play/Pause/Buffering) -->
            <Label 
                id="playerStatusLabel" 
                text="" 
                width="1920" 
                height="1080" 
                horizAlign="center" 
                vertAlign="center" 
                font="font:LargeBoldSystemFont" 
                color="0xFFFFFFFF" 
                opacity="0.8" />

            <!-- Bottom Gradient (Shadow) -->
            <Rectangle 
                width="1920" 
                height="250" 
                translation="[0, 830]" 
                color="0x000000CC" />

            <!-- Controls Container -->
            <Group translation="[50, 920]">
                <!-- Progress Bar Background -->
                <Rectangle 
                    width="1820" 
                    height="10" 
                    color="0x404040FF" 
                    translation="[0, 0]" />
                
                <!-- Progress Bar Buffered -->
                <Rectangle 
                    id="playerBufferedBar" 
                    width="0" 
                    height="10" 
                    color="0x808080FF" 
                    translation="[0, 0]" />

                <!-- Progress Bar Fill -->
                <Rectangle 
                    id="playerProgressBar" 
                    width="0" 
                    height="10" 
                    color="0x6F42C1FF" 
                    translation="[0, 0]" />

                <!-- Scrubber Head -->
                <Rectangle 
                    id="playerScrubberHead" 
                    width="20" 
                    height="20" 
                    color="0x6F42C1FF" 
                    translation="[-10, -5]" />

                <!-- Time Labels -->
                <Label 
                    id="playerCurrentTime" 
                    text="00:00" 
                    translation="[0, 30]" 
                    font="font:SmallSystemFont" 
                    color="0xDDDDDDFF" />
                
                <Label 
                    id="playerDuration" 
                    text="00:00" 
                    translation="[1700, 30]" 
                    width="120"
                    horizAlign="right"
                    font="font:SmallSystemFont" 
                    color="0xDDDDDDFF" />
            </Group>
        </Group>

        <!-- UI Timer -->
        <Timer id="playerTimer" repeat="true" duration="1" />
        <Timer id="overlayTimer" repeat="false" duration="4" />

        <!-- API Task -->
        <APITask id="apiTask" />

    </children>
</component>
